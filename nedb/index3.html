<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Test NeDB persistence in the browser</title>
  <link href="http://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.min.css" rel="stylesheet"/>
</head>
<body>
  <div id="results"></div>
  <script src="./node_modules/nedb/browser-version/out/nedb.min.js"></script>
  <script type="text/javascript">
  
	window.onload = function() {

		console.log("Beginning tests");
		console.log("Please note these tests work on Chrome latest, might not work on other browsers due to discrepancies in how local storage works for the file:// protocol");

		function testsFailed () {
		  document.getElementById("results").innerHTML = "TESTS FAILED";
		}

		localStorage.removeItem('test');
		var db = new Nedb({ filename: 'test', autoload: true });
		db.insert({ hello: 'world' }, function (err) {
		  if (err) {
		    testsFailed();
		    return;
		  }

		    document.getElementById("results").innerHTML = "BROWSER PERSISTENCE TEST PASSED";

		});


	};

  </script>
</body>
</html>
