<html>
<head>
    <title>Streaming Map</title>
    <meta name="generator" content="DocPad v6.59.6" />
    
</head>
<body>
    <h1>Streaming Map</h1>
<h3>Author: Jonas Colmsjo</h3>
<h3>Date: Wed Feb 27 2013 01:00:00 GMT+0100 (CET)</h3>
<div><p>Streaming Map/Reduce in Python</p>
<p>Links:</p>
<ul>
<li><a href="http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/">http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/</a></li>
<li><a href="http://wiki.apache.org/hadoop/ImportantConcepts">http://wiki.apache.org/hadoop/ImportantConcepts</a></li>
</ul>
<h2>Introduction</h2>
<p>Python seams to a language supported by many Hadoop providers (like Amazon etc). I would prefer
NodeJS but Python will have to do for now.</p>
<p>I have installed hadoop on my Mac (see separate post).</p>
<p>First create the map and reduct python scripts in the article.</p>
<p>Then copy the data to the hadoop file system:</p>
<pre><code># Create a directories for the job
hadoop fs -mkdir /Users/jonas/hadoop-store/mapred/wordcount
hadoop fs -mkdir /Users/jonas/hadoop-store/mapred/wordcount-output

# Copy the data
hadoop fs -put /Users/jonas/git/colmsjo/wip/Python/MapReduce_example/zaratustra.txt /Users/jonas/hadoop-store/mapred/wordcount

# Check that it&#39;s there
hadoop fs -ls /Users/jonas/hadoop-store/mapred/wordcount</code></pre>
<p>Now run the job:</p>
<pre><code>hadoop jar /usr/local/Cellar/hadoop/1.1.1/libexec/contrib/streaming/hadoop-streaming-1.1.1.jar  \
  -file    /Users/jonas/git/colmsjo/wip/Python/MapReduce_example/mapper.py \
  -mapper  /Users/jonas/git/colmsjo/wip/Python/MapReduce_example/mapper.py \
  -file    /Users/jonas/git/colmsjo/wip/Python/MapReduce_example/reducer.py \
  -reducer /Users/jonas/git/colmsjo/wip/Python/MapReduce_example/reducer.py \
  -input   /Users/jonas/hadoop-store/mapred/wordcount/* \
  -output  /Users/jonas/hadoop-store/mapred/wordcount-output</code></pre>
<p>Show the output:</p>
<pre><code>hadoop fs -cat /Users/jonas/hadoop-store/mapred/wordcount-output/part-00000</code></pre>
<p>Delete the output dir if you want to run the job again:</p>
<pre><code>hadoop fs -rmr /Users/jonas/hadoop-store/mapred/wordcount-output</code></pre>
</div>
    
</body>
</html>
