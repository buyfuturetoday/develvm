<html>
<head>
    <title>Cloud</title>
    <meta name="generator" content="DocPad v6.59.6" />
    
</head>
<body>
    <h1>Cloud</h1>
<h3>Author: Jonas Colmsjo</h3>
<h3>Date: Sun Jan 01 2012 01:00:00 GMT+0100 (CET)</h3>
<div><p>Yet another post</p>
<p>[[Main_Page]] &gt; [[Gizur server admin]]</p>
<h1>= Installation =</h1>
<h1>== Install KVM ==</h1>
<ul>
<li><a href="http://www.cyberciti.biz/faq/centos-rhel-linux-kvm-virtulization-tutorial/">http://www.cyberciti.biz/faq/centos-rhel-linux-kvm-virtulization-tutorial/</a></li>
<li><a href="http://wiki.centos.org/HowTos/KVM">http://wiki.centos.org/HowTos/KVM</a></li>
</ul>
<p>The xen kernel cannot be used together with kvm. Make sure you boot a non-xen kernel (/boot/grub.conf etc).</p>
<p>KVM is included in CentOS 5.5 64 bit.</p>
<p>It&#39;s not possbile to run the xen kernel and kvm at the same time. Xen can rum HVM (hardware assisted) guest though.</p>
<pre>
yum install kvm kmod-kvm
yum install qemu

yum groupinfo KVM

egrep '(vmx|svm)' --color=always /proc/cpuinfo

modprobe kvm_intel
modprobe kvm_amd

lsmod | grep kvm

cat /proc/cpuinfo | grep vm     # will be supressed if xen is running

yum install qemu                # make sure that the qemu tools are installed and latest version
</pre>

<h1>== Install cloud.com ==</h1>
<p>Single server
1. Install agenet
2. Install server</p>
<p>Agent</p>
<pre>
cd /etc/yum.repos.d/
wget http://download.cloud.com/foss/centos/cloud.repo

setenforce permissive                      # disable SELinux

yum clean all
yum install cloud-agent

cloud-setup-agent

iptables -I INPUT -i cloud0 -j ACCEPT
iptables -I FORWARD -i cloud0 -o cloud0 -j ACCEPT
iptables -I FORWARD -i cloudbr0 -o cloudbr0 -j ACCEPT
iptables –I INPUT -m tcp -p tcp --dport 5900:6100 –j ACCEPT

Then save your new iptables rules:
service iptables save

</pre>


<p>Management Server:</p>
<pre>
yum install mysql-server

# service mysqld start
# chkconfig mysqld on

cd /etc/yum.repos.d/
wget http://download.cloud.com/foss/centos/cloud.repo

cloud-setup-databases cloud kvm --deploy-as=root                 # if there is no password set for mysql
cloud-setup-databases cloud:<dbpassword> kvm --deploy-as=root:<rootpassword>     # if there is a password for mysql

cloud-setup-management

http://management-server-ip-address:8080/client

Setup zone, dhcp, storage etc. See install guide...
</pre>


<h1>== Troubleshooting ==</h1>
<h1>= Configuration =</h1>
</div>
    
</body>
</html>
