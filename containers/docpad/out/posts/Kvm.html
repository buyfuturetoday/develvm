<html>
<head>
    <title>Kvm</title>
    <meta name="generator" content="DocPad v6.59.6" />
    
</head>
<body>
    <h1>Kvm</h1>
<h3>Author: Jonas Colmsjo</h3>
<h3>Date: Sun Jan 01 2012 01:00:00 GMT+0100 (CET)</h3>
<div><p>Yet another post</p>
<p>[[Main_Page]] &gt; [[Cloud Solutions]]</p>
<h1>= Links =</h1>
<ul>
<li><a href="http://wiki.centos.org/HowTos/KVM">http://wiki.centos.org/HowTos/KVM</a> - setup KVM and bridged networking</li>
<li><a href="http://wiki.centos.org/HowTos/Network/IPTables">http://wiki.centos.org/HowTos/Network/IPTables</a></li>
<li><a href="http://www.cyberciti.biz/faq/rhel-linux-kvm-virtualization-bridged-networking-with-libvirt/">http://www.cyberciti.biz/faq/rhel-linux-kvm-virtualization-bridged-networking-with-libvirt/</a></li>
</ul>
<h1>= Installation =</h1>
<p>rpmforge repositories CANNOT  be enabled. I have not been able to get qemu to work using qemu from rpmforge.</p>
<pre>
egrep '(vmx|svm)' --color=always /proc/cpuinfo
yum install kvm kmod-kvm qemu-kvm-img virt-manager
modprobe kvm-amd
/sbin/lsmod | grep kvm
usermod -G kvm -a jonas etc.

reboot
</pre>

<p>Copy scripts for creating a bridge and TAP tunnels from the subversion repositiry</p>
<p>Install a windows server</p>
<pre>
qemu-img create -f qcow2 disk.img 5G
dd if=/dev/zero of=disk.img bs=1G count=5
# change img and iso etc
qemu-kvm -hda win2k.img -cdrom win2k.iso -m 512 -boot d
# run the machine
qemu-kvm -hda win2k.img
</pre>

<h1>= Network =</h1>
<p>Chenge the device of teh machine if it has been cloned</p>
<pre>
virsh
edit lserverXX
find the interface section and change vnetX toi vnetY
</pre>


<h1>= Disable NAT =</h1>
<ul>
<li><a href="http://www.cyberciti.biz/faq/linux-kvm-disable-virbr0-nat-interface/">http://www.cyberciti.biz/faq/linux-kvm-disable-virbr0-nat-interface/</a></li>
</ul>
</div>
    
</body>
</html>
